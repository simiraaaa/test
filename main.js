
tm.social.Nineleap.DEBUG_GAME_ID = "4194";
var SCREEN_WIDTH    = 320;              // スクリーン幅
var SCREEN_HEIGHT   = 320;              // スクリーン高さ
var SCREEN_CENTER_X = SCREEN_WIDTH/2;   // スクリーン幅の半分
var SCREEN_CENTER_Y = SCREEN_HEIGHT/2;  // スクリーン高さの半分

var ASSETS={
		"mogura":"mogura.png",
		"hatake":"hatake.png",
		"baku":"baku120.png",
		"ana":"ana.png",
		"tuti":"tuti.png",
		"ryuu":"ryuu.png",
		"ki":"ki.png",
		"goku":"goku.png",
		"tata":"tata.png",
		"sora":"sora.png",
		"life":"lifeicon.png"
};
var images={};
var info={
		"usernumber":0,
		"isUser":false,
		"user":[],
		"rhighmission":0,
		"replaysave":false,
		"isReplay":false,
		"combo":0,
		"maxcombo":0,
		"score":0,
		"highscore":0,
		"great":0,
		"good":0,
		"bad":0,
		"miss":0,
		"mission":0,
		"highmission":0,
		"life":50

};
var setInit=function(){
	info.combo=0;
	info.score=0;
	info.great=0;
	info.good=0;
	info.bad=0;
	info.miss=0;
	info.life=50;
};
//missionと同じ仕様の配列
var Replay=[];
for(var i=0;i<10;i++){
	Replay[i]={"d":[],"highscore":0,"rank":0};
}
Replay[0].highmission=0;
var mission=[];
mission[0]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"初めての土竜叩き",
		"mogura":[
			{t:30,p:4},
			{t:60,p:0},
			{t:90,p:1},
			{t:120,p:2},
			{t:150,p:6},
			{t:180,p:7},
			{t:210,p:8},
			{t:270,p:0},
			{t:300,p:2},
			{t:330,p:5},
			{t:345,p:4},
			{t:360,p:3},
			{t:390,p:8},
			{t:420,p:6},
			{t:450,p:3},
			{t:465,p:4},
			{t:480,p:5},
			{t:510,p:1},
			{t:570,p:0},
			{t:600,p:2},
			{t:630,p:4},
			{t:690,p:5},
			{t:720,p:3},
			{t:750,p:7},
			{t:810,p:6},
			{t:840,p:8},
			{t:870,p:0},
			{t:885,p:2},
			{t:900,p:4},
			{t:915,p:6},
			{t:930,p:8},
			{t:990,p:3},
			{t:1020,p:5},
			{t:1035,p:1},
			{t:1050,p:6},
			{t:1080,p:8},
			{t:1095,p:4},
			{t:1110,p:0},
			{t:1140,p:7},
			{t:1170,p:2},
			{t:1200,p:1},
			{t:1215,p:4},
			{t:1230,p:8},
			{t:1260,p:6},
			{t:1275,p:4},
			{t:1290,p:5},
			{t:1320,p:3},
			{t:1335,p:1},
			{t:1350,p:2},
			{t:1380,p:7},
			{t:1410,p:0},
			{t:1440,p:4},
			{t:1470,p:3},
			{t:1470,p:5}
		]
};
//ミッション1
mission[1]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"土竜駆逐計画始動",
		"mogura":[
			{t:30,p:0},
			{t:60,p:1},
			{t:90,p:2},
			{t:120,p:3},
			{t:150,p:4},
			{t:180,p:5},
			{t:210,p:6},
			{t:270,p:8},
			{t:285,p:7},
			{t:300,p:6},
			{t:315,p:4},
			{t:330,p:2},
			{t:345,p:1},
			{t:360,p:0},
			{t:390,p:8},
			{t:420,p:6},
			{t:450,p:2},
			{t:465,p:1},
			{t:480,p:0},
			{t:510,p:3},
			{t:540,p:5},
			{t:570,p:6},
			{t:585,p:7},
			{t:600,p:8},
			{t:630,p:4},
			{t:645,p:0},
			{t:660,p:2},
			{t:675,p:3},
			{t:690,p:5},
			{t:705,p:6},
			{t:720,p:8},
			{t:735,p:1},
			{t:750,p:7},
			{t:765,p:6},
			{t:780,p:8},
			{t:795,p:3},
			{t:810,p:5},
			{t:825,p:0},
			{t:840,p:2},
			{t:855,p:1},
			{t:863,p:4},
			{t:870,p:7},
			{t:900,p:0},
			{t:930,p:2},
			{t:960,p:6},
			{t:990,p:8},
			{t:1020,p:1},
			{t:1050,p:5},
			{t:1080,p:7},
			{t:1110,p:3},
			{t:1200,p:0},
			{t:1207,p:1},
			{t:1215,p:2},
			{t:1245,p:3},
			{t:1252,p:4},
			{t:1260,p:5},
			{t:1290,p:6},
			{t:1297,p:7},
			{t:1305,p:8},
			{t:1335,p:0},
			{t:1342,p:5},
			{t:1350,p:6},
			{t:1365,p:2},
			{t:1372,p:3},
			{t:1380,p:8},
			{t:1410,p:0},
			{t:1417,p:3},
			{t:1425,p:6},
			{t:1455,p:1},
			{t:1462,p:4},
			{t:1470,p:7},
			{t:1500,p:2},
			{t:1507,p:5},
			{t:1515,p:8},
			{t:1545,p:0},
			{t:1552,p:7},
			{t:1560,p:2},
			{t:1575,p:6},
			{t:1582,p:1},
			{t:1590,p:8},
			{t:1605,p:4}
		]
};


//ミッション2
mission[2]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"土竜大量発生!",
		"mogura":[
			{t:30,p:0},
			{t:30,p:2},
			{t:60,p:3},
			{t:60,p:5},
			{t:90,p:6},
			{t:90,p:8},
			{t:120,p:1},
			{t:135,p:4},
			{t:150,p:7},
			{t:180,p:0},
			{t:180,p:6},
			{t:210,p:1},
			{t:210,p:7},
			{t:240,p:2},
			{t:240,p:8},
			{t:270,p:3},
			{t:285,p:4},
			{t:300,p:5},
			{t:330,p:6},
			{t:330,p:8},
			{t:360,p:3},
			{t:360,p:5},
			{t:390,p:0},
			{t:390,p:2},
			{t:420,p:7},
			{t:435,p:4},
			{t:450,p:1},
			{t:480,p:8},
			{t:480,p:2},
			{t:510,p:1},
			{t:510,p:7},
			{t:540,p:0},
			{t:540,p:6},
			{t:570,p:5},
			{t:585,p:4},
			{t:600,p:3},
			{t:630,p:0},
			{t:630,p:2},
			{t:645,p:4},
			{t:660,p:6},
			{t:660,p:8},
			{t:675,p:7},
			{t:690,p:3},
			{t:690,p:5},
			{t:705,p:1},
			{t:720,p:0},
			{t:720,p:2},
			{t:750,p:8},
			{t:750,p:6},
			{t:765,p:4},
			{t:780,p:0},
			{t:780,p:2},
			{t:795,p:1},
			{t:810,p:3},
			{t:810,p:5},
			{t:825,p:7},
			{t:840,p:6},
			{t:840,p:8},
			{t:870,p:0},
			{t:900,p:1},
			{t:930,p:2},
			{t:960,p:4},
			{t:990,p:6},
			{t:1020,p:7},
			{t:1050,p:8},
			{t:1110,p:0},
			{t:1117,p:1},
			{t:1125,p:2},
			{t:1132,p:4},
			{t:1140,p:6},
			{t:1147,p:7},
			{t:1155,p:8},
			{t:1170,p:0},
			{t:1177,p:3},
			{t:1185,p:6},
			{t:1192,p:4},
			{t:1200,p:2},
			{t:1207,p:5},
			{t:1215,p:8},
			{t:1230,p:6},
			{t:1237,p:7},
			{t:1245,p:8},
			{t:1252,p:4},
			{t:1260,p:0},
			{t:1267,p:1},
			{t:1275,p:2},
			{t:1290,p:6},
			{t:1297,p:3},
			{t:1305,p:0},
			{t:1312,p:4},
			{t:1320,p:8},
			{t:1327,p:5},
			{t:1335,p:2},
			{t:1350,p:1},
			{t:1350,p:7},
			{t:1380,p:2},
			{t:1380,p:6},
			{t:1410,p:3},
			{t:1410,p:5},
			{t:1440,p:0},
			{t:1440,p:8},
			{t:1470,p:1},
			{t:1485,p:5},
			{t:1500,p:7},
			{t:1515,p:3},
			{t:1530,p:0},
			{t:1537,p:2},
			{t:1545,p:8},
			{t:1552,p:6},
			{t:1560,p:3},
			{t:1560,p:4},
			{t:1560,p:5}
		]
};


//ミッション3
mission[3]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"土竜叩きの旅へ",
		"mogura":[
			{t:30,p:4},
			{t:45,p:0},
			{t:52,p:1},
			{t:60,p:2},
			{t:67,p:5},
			{t:75,p:8},
			{t:90,p:7},
			{t:105,p:6},
			{t:120,p:4},
			{t:135,p:6},
			{t:142,p:7},
			{t:150,p:8},
			{t:157,p:5},
			{t:165,p:2},
			{t:180,p:1},
			{t:195,p:0},
			{t:210,p:4},
			{t:225,p:6},
			{t:232,p:0},
			{t:240,p:7},
			{t:247,p:1},
			{t:255,p:8},
			{t:255,p:2},
			{t:270,p:3},
			{t:270,p:5},
			{t:285,p:0},
			{t:285,p:6},
			{t:300,p:4},
			{t:315,p:2},
			{t:322,p:8},
			{t:330,p:1},
			{t:337,p:7},
			{t:345,p:0},
			{t:345,p:6},
			{t:360,p:3},
			{t:360,p:5},
			{t:375,p:8},
			{t:375,p:2},
			{t:390,p:4},
			{t:420,p:5},
			{t:435,p:3},
			{t:465,p:1},
			{t:480,p:0},
			{t:495,p:2},
			{t:510,p:7},
			{t:517,p:8},
			{t:525,p:6},
			{t:540,p:0},
			{t:555,p:5},
			{t:570,p:6},
			{t:585,p:8},
			{t:600,p:3},
			{t:615,p:2},
			{t:630,p:1},
			{t:645,p:7},
			{t:660,p:8},
			{t:675,p:0},
			{t:690,p:6},
			{t:705,p:2},
			{t:720,p:1},
			{t:735,p:4},
			{t:750,p:7},
			{t:780,p:0},
			{t:780,p:2},
			{t:795,p:6},
			{t:795,p:1},
			{t:810,p:0},
			{t:810,p:5},
			{t:825,p:6},
			{t:825,p:4},
			{t:840,p:0},
			{t:840,p:8},
			{t:855,p:6},
			{t:855,p:7},
			{t:870,p:5},
			{t:870,p:0},
			{t:877,p:4},
			{t:885,p:1},
			{t:885,p:6},
			{t:892,p:2},
			{t:900,p:7},
			{t:900,p:0},
			{t:915,p:8},
			{t:915,p:6},
			{t:930,p:4},
			{t:930,p:0},
			{t:945,p:5},
			{t:945,p:6},
			{t:960,p:1},
			{t:960,p:0},
			{t:975,p:2},
			{t:975,p:6},
			{t:990,p:5},
			{t:990,p:0},
			{t:997,p:4},
			{t:1005,p:7},
			{t:1005,p:6},
			{t:1012,p:8},
			{t:1020,p:2},
			{t:1020,p:0},
			{t:1027,p:1},
			{t:1035,p:4},
			{t:1035,p:6},
			{t:1042,p:5},
			{t:1050,p:8},
			{t:1050,p:0},
			{t:1057,p:7},
			{t:1065,p:3},
			{t:1065,p:6},
			{t:1072,p:1},
			{t:1080,p:2},
			{t:1080,p:0},
			{t:1087,p:5},
			{t:1095,p:4},
			{t:1095,p:6},
			{t:1102,p:7},
			{t:1110,p:8},
			{t:1110,p:0},
			{t:1117,p:5},
			{t:1125,p:2},
			{t:1125,p:6},
			{t:1140,p:1},
			{t:1140,p:7},
			{t:1140,p:4}
		]
};


//ミッション4
mission[4]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"土竜叩き職人の修行",
		"mogura":[
	  		{t:30,p:2},
			{t:30,p:3},
			{t:30,p:8},
			{t:60,p:0},
			{t:60,p:5},
			{t:60,p:6},
			{t:90,p:1},
			{t:105,p:7},
			{t:120,p:4},
			{t:150,p:0},
			{t:150,p:7},
			{t:150,p:2},
			{t:180,p:8},
			{t:180,p:1},
			{t:180,p:6},
			{t:210,p:3},
			{t:225,p:5},
			{t:240,p:4},
			{t:270,p:0},
			{t:270,p:1},
			{t:285,p:4},
			{t:285,p:5},
			{t:300,p:8},
			{t:307,p:7},
			{t:315,p:6},
			{t:330,p:1},
			{t:330,p:2},
			{t:345,p:3},
			{t:345,p:4},
			{t:360,p:6},
			{t:367,p:7},
			{t:375,p:8},
			{t:390,p:1},
			{t:390,p:3},
			{t:405,p:2},
			{t:405,p:6},
			{t:420,p:7},
			{t:420,p:5},
			{t:435,p:0},
			{t:435,p:8},
			{t:450,p:1},
			{t:450,p:5},
			{t:465,p:0},
			{t:465,p:8},
			{t:480,p:3},
			{t:480,p:7},
			{t:495,p:6},
			{t:495,p:2},
			{t:510,p:5},
			{t:510,p:7},
			{t:525,p:6},
			{t:525,p:2},
			{t:540,p:1},
			{t:540,p:3},
			{t:555,p:0},
			{t:555,p:8},
			{t:562,p:4},
			{t:570,p:3},
			{t:570,p:7},
			{t:585,p:0},
			{t:585,p:8},
			{t:600,p:1},
			{t:600,p:5},
			{t:607,p:4},
			{t:615,p:6},
			{t:615,p:2},
			{t:645,p:0},
			{t:660,p:1},
			{t:690,p:2},
			{t:690,p:3},
			{t:705,p:4},
			{t:735,p:5},
			{t:735,p:6},
			{t:750,p:7},
			{t:780,p:8},
			{t:780,p:3},
			{t:795,p:5},
			{t:810,p:0},
			{t:825,p:2},
			{t:825,p:8},
			{t:840,p:7},
			{t:840,p:6},
			{t:870,p:5},
			{t:885,p:4},
			{t:885,p:3},
			{t:915,p:2},
			{t:930,p:1},
			{t:930,p:0},
			{t:960,p:4},
			{t:967,p:0},
			{t:967,p:2},
			{t:975,p:6},
			{t:975,p:8},
			{t:1005,p:0},
			{t:1005,p:4},
			{t:1035,p:2},
			{t:1035,p:4},
			{t:1065,p:6},
			{t:1065,p:4},
			{t:1095,p:8},
			{t:1095,p:4},
			{t:1125,p:0},
			{t:1125,p:4},
			{t:1140,p:1},
			{t:1155,p:2},
			{t:1155,p:4},
			{t:1170,p:3},
			{t:1185,p:5},
			{t:1185,p:4},
			{t:1200,p:6},
			{t:1215,p:7},
			{t:1215,p:4},
			{t:1230,p:8},
			{t:1245,p:0},
			{t:1245,p:3},
			{t:1245,p:5},
			{t:1252,p:1},
			{t:1260,p:2},
			{t:1267,p:4},
			{t:1275,p:6},
			{t:1275,p:3},
			{t:1275,p:5},
			{t:1282,p:7},
			{t:1290,p:8},
			{t:1297,p:4},
			{t:1305,p:2},
			{t:1305,p:3},
			{t:1305,p:5},
			{t:1312,p:1},
			{t:1320,p:0},
			{t:1327,p:4},
			{t:1335,p:8},
			{t:1335,p:3},
			{t:1335,p:5},
			{t:1342,p:7},
			{t:1350,p:6},
			{t:1357,p:4},
			{t:1365,p:3},
			{t:1380,p:5},
			{t:1395,p:0},
			{t:1395,p:1},
			{t:1395,p:2},
			{t:1402,p:6},
			{t:1402,p:7},
			{t:1402,p:8}
		]
};

//ミッション5
mission[5]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"土竜叩き職人転職試験",
		"mogura":[
		      	{t:30,p:4},
		    	{t:37,p:0},
		    	{t:37,p:2},
		    	{t:45,p:1},
		    	{t:52,p:6},
		    	{t:52,p:8},
		    	{t:60,p:7},
		    	{t:67,p:3},
		    	{t:67,p:5},
		    	{t:75,p:4},
		    	{t:82,p:0},
		    	{t:82,p:2},
		    	{t:90,p:1},
		    	{t:105,p:3},
		    	{t:105,p:4},
		    	{t:105,p:5},
		    	{t:120,p:6},
		    	{t:120,p:7},
		    	{t:120,p:8},
		    	{t:135,p:1},
		    	{t:150,p:3},
		    	{t:150,p:4},
		    	{t:150,p:5},
		    	{t:165,p:6},
		    	{t:165,p:7},
		    	{t:165,p:8},
		    	{t:180,p:1},
		    	{t:195,p:3},
		    	{t:195,p:4},
		    	{t:195,p:5},
		    	{t:210,p:6},
		    	{t:210,p:7},
		    	{t:210,p:8},
		    	{t:225,p:1},
		    	{t:240,p:3},
		    	{t:240,p:4},
		    	{t:240,p:5},
		    	{t:255,p:6},
		    	{t:255,p:7},
		    	{t:255,p:8},
		    	{t:270,p:4},
		    	{t:277,p:0},
		    	{t:277,p:6},
		    	{t:285,p:3},
		    	{t:292,p:8},
		    	{t:292,p:2},
		    	{t:300,p:5},
		    	{t:307,p:1},
		    	{t:307,p:7},
		    	{t:315,p:4},
		    	{t:322,p:0},
		    	{t:322,p:6},
		    	{t:330,p:3},
		    	{t:345,p:1},
		    	{t:345,p:4},
		    	{t:345,p:7},
		    	{t:360,p:2},
		    	{t:360,p:5},
		    	{t:360,p:8},
		    	{t:375,p:3},
		    	{t:390,p:1},
		    	{t:390,p:4},
		    	{t:390,p:7},
		    	{t:405,p:2},
		    	{t:405,p:5},
		    	{t:405,p:8},
		    	{t:420,p:3},
		    	{t:435,p:1},
		    	{t:435,p:4},
		    	{t:435,p:7},
		    	{t:450,p:2},
		    	{t:450,p:5},
		    	{t:450,p:8},
		    	{t:465,p:3},
		    	{t:480,p:1},
		    	{t:480,p:4},
		    	{t:480,p:7},
		    	{t:495,p:2},
		    	{t:495,p:5},
		    	{t:495,p:8},
		    	{t:510,p:0},
		    	{t:517,p:1},
		    	{t:525,p:2},
		    	{t:532,p:6},
		    	{t:540,p:7},
		    	{t:547,p:8},
		    	{t:555,p:3},
		    	{t:555,p:4},
		    	{t:555,p:5},
		    	{t:570,p:0},
		    	{t:570,p:1},
		    	{t:570,p:2},
		    	{t:585,p:6},
		    	{t:585,p:7},
		    	{t:585,p:8},
		    	{t:600,p:0},
		    	{t:607,p:3},
		    	{t:615,p:6},
		    	{t:622,p:2},
		    	{t:630,p:5},
		    	{t:637,p:8},
		    	{t:645,p:1},
		    	{t:645,p:4},
		    	{t:645,p:7},
		    	{t:660,p:0},
		    	{t:660,p:3},
		    	{t:660,p:6},
		    	{t:675,p:2},
		    	{t:675,p:5},
		    	{t:675,p:8},
		    	{t:690,p:3},
		    	{t:697,p:0},
		    	{t:705,p:1},
		    	{t:712,p:7},
		    	{t:720,p:8},
		    	{t:727,p:5},
		    	{t:735,p:6},
		    	{t:735,p:4},
		    	{t:735,p:2},
		    	{t:750,p:1},
		    	{t:750,p:0},
		    	{t:750,p:3},
		    	{t:765,p:7},
		    	{t:765,p:8},
		    	{t:765,p:5},
		    	{t:780,p:3},
		    	{t:787,p:6},
		    	{t:795,p:7},
		    	{t:802,p:1},
		    	{t:810,p:2},
		    	{t:817,p:5},
		    	{t:825,p:0},
		    	{t:825,p:4},
		    	{t:825,p:8},
		    	{t:840,p:3},
		    	{t:840,p:6},
		    	{t:840,p:7},
		    	{t:855,p:1},
		    	{t:855,p:2},
		    	{t:855,p:5},
		    	{t:870,p:4},
		    	{t:877,p:0},
		    	{t:885,p:1},
		    	{t:892,p:2},
		    	{t:900,p:6},
		    	{t:907,p:7},
		    	{t:915,p:8},
		    	{t:915,p:0},
		    	{t:915,p:3},
		    	{t:915,p:5},
		    	{t:945,p:4},
		    	{t:960,p:0},
		    	{t:960,p:2},
		    	{t:960,p:6},
		    	{t:960,p:8},
		    	{t:990,p:4},
		    	{t:1005,p:1},
		    	{t:1005,p:5},
		    	{t:1005,p:7},
		    	{t:1005,p:3},
		    	{t:1035,p:4},
		    	{t:1050,p:0},
		    	{t:1050,p:2},
		    	{t:1050,p:6},
		    	{t:1050,p:8},
		    	{t:1080,p:4},
		    	{t:1095,p:1},
		    	{t:1095,p:5},
		    	{t:1095,p:7},
		    	{t:1095,p:3},
		    	{t:1125,p:0},
		    	{t:1129,p:1},
		    	{t:1133,p:2},
		    	{t:1137,p:3},
		    	{t:1140,p:4},
		    	{t:1144,p:5},
		    	{t:1148,p:6},
		    	{t:1152,p:7},
		    	{t:1155,p:8},
		    	{t:1170,p:0},
		    	{t:1170,p:1},
		    	{t:1170,p:2},
		    	{t:1185,p:3},
		    	{t:1185,p:4},
		    	{t:1185,p:5},
		    	{t:1200,p:6},
		    	{t:1200,p:7},
		    	{t:1200,p:8}

		          ]
};

//ミッション6
mission[6]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"守られる側から守る側へ",
		"mogura":[
		      	{t:30,p:0},
		    	{t:37,p:1},
		    	{t:45,p:2},
		    	{t:52,p:4},
		    	{t:60,p:6},
		    	{t:67,p:7},
		    	{t:75,p:8},
		    	{t:90,p:0},
		    	{t:97,p:1},
		    	{t:105,p:4},
		    	{t:112,p:5},
		    	{t:120,p:3},
		    	{t:127,p:7},
		    	{t:135,p:6},
		    	{t:150,p:2},
		    	{t:157,p:3},
		    	{t:165,p:8},
		    	{t:172,p:0},
		    	{t:180,p:5},
		    	{t:187,p:6},
		    	{t:195,p:4},
		    	{t:210,p:1},
		    	{t:210,p:7},
		    	{t:217,p:2},
		    	{t:217,p:6},
		    	{t:225,p:3},
		    	{t:225,p:5},
		    	{t:232,p:0},
		    	{t:232,p:8},
		    	{t:240,p:1},
		    	{t:240,p:7},
		    	{t:270,p:1},
		    	{t:270,p:2},
		    	{t:270,p:6},
		    	{t:270,p:7},
		    	{t:300,p:0},
		    	{t:300,p:3},
		    	{t:300,p:8},
		    	{t:300,p:5},
		    	{t:330,p:0},
		    	{t:330,p:4},
		    	{t:330,p:2},
		    	{t:345,p:3},
		    	{t:345,p:5},
		    	{t:345,p:7},
		    	{t:360,p:0},
		    	{t:360,p:1},
		    	{t:367,p:2},
		    	{t:367,p:5},
		    	{t:375,p:3},
		    	{t:375,p:6},
		    	{t:382,p:7},
		    	{t:382,p:8},
		    	{t:390,p:0},
		    	{t:390,p:1},
		    	{t:390,p:2},
		    	{t:390,p:5},
		    	{t:420,p:3},
		    	{t:420,p:6},
		    	{t:420,p:7},
		    	{t:420,p:8},
		    	{t:450,p:6},
		    	{t:450,p:8},
		    	{t:450,p:4},
		    	{t:465,p:3},
		    	{t:465,p:5},
		    	{t:465,p:1},
		    	{t:480,p:8},
		    	{t:484,p:7},
		    	{t:488,p:6},
		    	{t:492,p:5},
		    	{t:495,p:3},
		    	{t:499,p:2},
		    	{t:503,p:1},
		    	{t:507,p:0},
		    	{t:510,p:4},
		    	{t:525,p:2},
		    	{t:525,p:6},
		    	{t:532,p:3},
		    	{t:532,p:5},
		    	{t:540,p:0},
		    	{t:540,p:8},
		    	{t:555,p:1},
		    	{t:555,p:7},
		    	{t:562,p:2},
		    	{t:562,p:6},
		    	{t:570,p:4},
		    	{t:585,p:0},
		    	{t:585,p:8},
		    	{t:592,p:3},
		    	{t:592,p:5},
		    	{t:600,p:6},
		    	{t:600,p:2},
		    	{t:615,p:1},
		    	{t:615,p:7},
		    	{t:622,p:0},
		    	{t:622,p:8},
		    	{t:630,p:4},
		    	{t:645,p:2},
		    	{t:649,p:6},
		    	{t:653,p:5},
		    	{t:657,p:3},
		    	{t:660,p:8},
		    	{t:660,p:0},
		    	{t:675,p:7},
		    	{t:679,p:1},
		    	{t:683,p:6},
		    	{t:687,p:2},
		    	{t:690,p:4},
		    	{t:705,p:0},
		    	{t:709,p:8},
		    	{t:713,p:3},
		    	{t:717,p:5},
		    	{t:720,p:6},
		    	{t:720,p:2},
		    	{t:735,p:1},
		    	{t:739,p:7},
		    	{t:743,p:0},
		    	{t:747,p:8},
		    	{t:750,p:4},
		    	{t:780,p:0},
		    	{t:795,p:8},
		    	{t:810,p:2},
		    	{t:825,p:6},
		    	{t:840,p:4},
		    	{t:840,p:1},
		    	{t:855,p:3},
		    	{t:870,p:7},
		    	{t:885,p:5},
		    	{t:900,p:0},
		    	{t:900,p:8},
		    	{t:907,p:4},
		    	{t:915,p:2},
		    	{t:922,p:6},
		    	{t:930,p:3},
		    	{t:930,p:5},
		    	{t:937,p:4},
		    	{t:945,p:1},
		    	{t:952,p:7},
		    	{t:960,p:6},
		    	{t:960,p:2},
		    	{t:967,p:4},
		    	{t:975,p:8},
		    	{t:982,p:0},
		    	{t:990,p:1},
		    	{t:990,p:7},
		    	{t:997,p:4},
		    	{t:1005,p:5},
		    	{t:1012,p:3},
		    	{t:1020,p:0},
		    	{t:1035,p:6},
		    	{t:1050,p:0},
		    	{t:1065,p:6},
		    	{t:1080,p:1},
		    	{t:1080,p:0},
		    	{t:1087,p:2},
		    	{t:1095,p:4},
		    	{t:1095,p:6},
		    	{t:1102,p:5},
		    	{t:1110,p:7},
		    	{t:1110,p:0},
		    	{t:1117,p:8},
		    	{t:1125,p:1},
		    	{t:1125,p:6},
		    	{t:1132,p:0},
		    	{t:1140,p:4},
		    	{t:1147,p:6},
		    	{t:1155,p:3},
		    	{t:1162,p:0},
		    	{t:1170,p:4},
		    	{t:1177,p:6},
		    	{t:1185,p:3},
		    	{t:1192,p:2},
		    	{t:1192,p:0},
		    	{t:1200,p:4},
		    	{t:1207,p:8},
		    	{t:1207,p:6},
		    	{t:1215,p:3},
		    	{t:1222,p:1},
		    	{t:1222,p:0},
		    	{t:1230,p:2},
		    	{t:1230,p:4},
		    	{t:1237,p:7},
		    	{t:1237,p:6},
		    	{t:1245,p:8},
		    	{t:1245,p:3},
		    	{t:1252,p:2},
		    	{t:1252,p:0},
		    	{t:1260,p:7},
		    	{t:1260,p:4},
		    	{t:1267,p:8},
		    	{t:1267,p:6},
		    	{t:1275,p:2},
		    	{t:1275,p:3},
		    	{t:1282,p:0},
		    	{t:1286,p:1},
		    	{t:1290,p:4},
		    	{t:1294,p:2},
		    	{t:1297,p:6},
		    	{t:1301,p:7},
		    	{t:1305,p:3},
		    	{t:1309,p:8},
		    	{t:1312,p:0},
		    	{t:1316,p:2},
		    	{t:1320,p:4},
		    	{t:1324,p:7},
		    	{t:1327,p:6},
		    	{t:1331,p:8},
		    	{t:1335,p:3},
		    	{t:1339,p:1},
		    	{t:1369,p:0},
		    	{t:1369,p:1},
		    	{t:1369,p:2},
		    	{t:1369,p:5},
		    	{t:1376,p:3},
		    	{t:1376,p:6},
		    	{t:1376,p:7},
		    	{t:1376,p:8}

		          ]
};

//ミッション7
mission[7]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"地獄から蘇りし土竜達",
		"mogura":[{t:30,p:2},
		          {t:34,p:1},
		          {t:37,p:0},
		          {t:52,p:4},
		          {t:56,p:3},
		          {t:60,p:5},
		          {t:75,p:8},
		          {t:79,p:7},
		          {t:82,p:6},
		          {t:90,p:0},
		          {t:94,p:1},
		          {t:98,p:2},
		          {t:101,p:4},
		          {t:105,p:6},
		          {t:105,p:7},
		          {t:105,p:8},
		          {t:135,p:6},
		          {t:139,p:7},
		          {t:142,p:8},
		          {t:157,p:5},
		          {t:161,p:3},
		          {t:165,p:4},
		          {t:180,p:0},
		          {t:184,p:1},
		          {t:187,p:2},
		          {t:195,p:8},
		          {t:199,p:7},
		          {t:203,p:6},
		          {t:206,p:4},
		          {t:210,p:0},
		          {t:210,p:1},
		          {t:210,p:2},
		          {t:240,p:6},
		          {t:244,p:3},
		          {t:247,p:0},
		          {t:262,p:4},
		          {t:266,p:1},
		          {t:270,p:7},
		          {t:285,p:8},
		          {t:289,p:5},
		          {t:292,p:2},
		          {t:300,p:0},
		          {t:304,p:3},
		          {t:308,p:6},
		          {t:311,p:4},
		          {t:315,p:2},
		          {t:315,p:5},
		          {t:315,p:8},
		          {t:345,p:2},
		          {t:349,p:5},
		          {t:352,p:8},
		          {t:367,p:4},
		          {t:371,p:7},
		          {t:375,p:1},
		          {t:390,p:0},
		          {t:394,p:3},
		          {t:397,p:6},
		          {t:405,p:8},
		          {t:409,p:5},
		          {t:413,p:2},
		          {t:416,p:4},
		          {t:420,p:0},
		          {t:420,p:3},
		          {t:420,p:6},
		          {t:435,p:1},
		          {t:439,p:8},
		          {t:443,p:2},
		          {t:447,p:7},
		          {t:450,p:5},
		          {t:454,p:0},
		          {t:458,p:3},
		          {t:462,p:6},
		          {t:465,p:1},
		          {t:480,p:0},
		          {t:480,p:8},
		          {t:495,p:6},
		          {t:495,p:2},
		          {t:510,p:3},
		          {t:510,p:5},
		          {t:525,p:4},
		          {t:540,p:1},
		          {t:540,p:6},
		          {t:555,p:0},
		          {t:555,p:5},
		          {t:570,p:2},
		          {t:570,p:7},
		          {t:585,p:0},
		          {t:585,p:3},
		          {t:592,p:1},
		          {t:592,p:4},
		          {t:600,p:2},
		          {t:600,p:5},
		          {t:615,p:6},
		          {t:615,p:8},
		          {t:622,p:4},
		          {t:622,p:7},
		          {t:630,p:3},
		          {t:630,p:5},
		          {t:645,p:0},
		          {t:645,p:8},
		          {t:652,p:2},
		          {t:652,p:4},
		          {t:652,p:6},
		          {t:660,p:3},
		          {t:660,p:5},
		          {t:667,p:1},
		          {t:667,p:7},
		          {t:675,p:0},
		          {t:675,p:2},
		          {t:675,p:6},
		          {t:675,p:8},
		          {t:705,p:6},
		          {t:712,p:8},
		          {t:720,p:4},
		          {t:727,p:7},
		          {t:735,p:2},
		          {t:742,p:5},
		          {t:750,p:0},
		          {t:757,p:3},
		          {t:765,p:1},
		          {t:772,p:6},
		          {t:780,p:5},
		          {t:787,p:0},
		          {t:795,p:7},
		          {t:802,p:2},
		          {t:810,p:3},
		          {t:817,p:8},
		          {t:825,p:1},
		          {t:829,p:0},
		          {t:833,p:3},
		          {t:837,p:6},
		          {t:840,p:4},
		          {t:844,p:2},
		          {t:848,p:5},
		          {t:852,p:8},
		          {t:855,p:7},
		          {t:859,p:3},
		          {t:863,p:1},
		          {t:867,p:2},
		          {t:870,p:4},
		          {t:874,p:6},
		          {t:878,p:7},
		          {t:882,p:5},
		          {t:885,p:8},
		          {t:892,p:0},
		          {t:900,p:1},
		          {t:907,p:3},
		          {t:922,p:4},
		          {t:922,p:6},
		          {t:930,p:2},
		          {t:937,p:1},
		          {t:945,p:5},
		          {t:960,p:0},
		          {t:960,p:4},
		          {t:967,p:8},
		          {t:975,p:7},
		          {t:982,p:5},
		          {t:997,p:2},
		          {t:997,p:4},
		          {t:1005,p:6},
		          {t:1012,p:3},
		          {t:1020,p:7},
		          {t:1035,p:4},
		          {t:1035,p:1},
		          {t:1043,p:3},
		          {t:1050,p:5},
		          {t:1058,p:7},
		          {t:1073,p:1},
		          {t:1073,p:4},
		          {t:1081,p:5},
		          {t:1088,p:3},
		          {t:1096,p:7},
		          {t:1111,p:5},
		          {t:1111,p:4},
		          {t:1118,p:3},
		          {t:1126,p:7},
		          {t:1133,p:1},
		          {t:1148,p:5},
		          {t:1148,p:4},
		          {t:1156,p:7},
		          {t:1163,p:3},
		          {t:1171,p:1},
		          {t:1186,p:0},
		          {t:1186,p:4},
		          {t:1201,p:2},
		          {t:1201,p:1},
		          {t:1216,p:6},
		          {t:1216,p:3},
		          {t:1231,p:7},
		          {t:1231,p:5},
		          {t:1246,p:8},
		          {t:1246,p:0},
		          {t:1261,p:1},
		          {t:1261,p:2},
		          {t:1276,p:3},
		          {t:1276,p:4},
		          {t:1291,p:7},
		          {t:1291,p:8},
		          {t:1306,p:5},
		          {t:1306,p:0},
		          {t:1321,p:6},
		          {t:1321,p:7},
		          {t:1328,p:4},
		          {t:1328,p:2},
		          {t:1336,p:1},
		          {t:1336,p:5},
		          {t:1351,p:0},
		          {t:1351,p:3},
		          {t:1358,p:8},
		          {t:1358,p:4},
		          {t:1366,p:6},
		          {t:1366,p:2},
		          {t:1381,p:0},
		          {t:1396,p:1},
		          {t:1400,p:3},
		          {t:1400,p:6},
		          {t:1404,p:4},
		          {t:1404,p:7},
		          {t:1408,p:5},
		          {t:1408,p:8},
		          {t:1426,p:0},
		          {t:1441,p:3},
		          {t:1445,p:1},
		          {t:1445,p:2},
		          {t:1449,p:4},
		          {t:1449,p:5},
		          {t:1453,p:7},
		          {t:1453,p:8},
		          {t:1486,p:0},
		          {t:1486,p:1},
		          {t:1486,p:2},
		          {t:1490,p:3},
		          {t:1490,p:4},
		          {t:1490,p:5},
		          {t:1494,p:6},
		          {t:1494,p:7},
		          {t:1494,p:8}

		          ]
};

//ミッション8
mission[8]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"土竜叩き界の\n王としての威厳を守る",
		"mogura":[{t:30,p:1},
		          {t:60,p:4},
		          {t:90,p:7},
		          {t:90,p:0},
		          {t:120,p:1},
		          {t:120,p:3},
		          {t:150,p:6},
		          {t:150,p:4},
		          {t:150,p:2},
		          {t:180,p:0},
		          {t:180,p:7},
		          {t:180,p:5},
		          {t:210,p:8},
		          {t:210,p:3},
		          {t:210,p:1},
		          {t:210,p:0},
		          {t:240,p:2},
		          {t:240,p:6},
		          {t:240,p:4},
		          {t:240,p:5},
		          {t:270,p:1},
		          {t:285,p:4},
		          {t:300,p:7},
		          {t:315,p:1},
		          {t:330,p:4},
		          {t:330,p:0},
		          {t:345,p:7},
		          {t:345,p:3},
		          {t:360,p:1},
		          {t:360,p:6},
		          {t:375,p:4},
		          {t:375,p:0},
		          {t:390,p:7},
		          {t:390,p:3},
		          {t:390,p:2},
		          {t:405,p:1},
		          {t:405,p:6},
		          {t:405,p:5},
		          {t:420,p:4},
		          {t:420,p:0},
		          {t:420,p:8},
		          {t:435,p:7},
		          {t:435,p:3},
		          {t:435,p:2},
		          {t:450,p:1},
		          {t:450,p:6},
		          {t:450,p:5},
		          {t:450,p:0},
		          {t:465,p:4},
		          {t:465,p:3},
		          {t:465,p:8},
		          {t:465,p:7},
		          {t:480,p:1},
		          {t:480,p:6},
		          {t:480,p:5},
		          {t:480,p:2},
		          {t:495,p:4},
		          {t:495,p:3},
		          {t:495,p:0},
		          {t:495,p:7},
		          {t:525,p:1},
		          {t:532,p:4},
		          {t:540,p:7},
		          {t:547,p:1},
		          {t:570,p:4},
		          {t:570,p:0},
		          {t:577,p:7},
		          {t:577,p:3},
		          {t:585,p:1},
		          {t:585,p:6},
		          {t:592,p:4},
		          {t:592,p:0},
		          {t:630,p:7},
		          {t:630,p:3},
		          {t:630,p:2},
		          {t:637,p:1},
		          {t:637,p:6},
		          {t:637,p:5},
		          {t:660,p:4},
		          {t:660,p:0},
		          {t:660,p:8},
		          {t:667,p:7},
		          {t:667,p:3},
		          {t:667,p:2},
		          {t:690,p:1},
		          {t:690,p:6},
		          {t:690,p:5},
		          {t:690,p:0},
		          {t:697,p:4},
		          {t:697,p:3},
		          {t:697,p:8},
		          {t:697,p:7},
		          {t:720,p:1},
		          {t:720,p:6},
		          {t:720,p:5},
		          {t:720,p:2},
		          {t:727,p:4},
		          {t:727,p:3},
		          {t:727,p:0},
		          {t:727,p:7},
		          {t:757,p:4},
		          {t:757,p:5},
		          {t:772,p:0},
		          {t:772,p:2},
		          {t:787,p:4},
		          {t:787,p:7},
		          {t:802,p:1},
		          {t:802,p:2},
		          {t:817,p:5},
		          {t:817,p:8},
		          {t:817,p:0},
		          {t:832,p:4},
		          {t:832,p:1},
		          {t:832,p:2},
		          {t:847,p:6},
		          {t:847,p:7},
		          {t:847,p:3},
		          {t:862,p:5},
		          {t:862,p:8},
		          {t:862,p:0},
		          {t:892,p:0},
		          {t:907,p:8},
		          {t:922,p:0},
		          {t:937,p:8},
		          {t:952,p:1},
		          {t:952,p:0},
		          {t:967,p:7},
		          {t:967,p:8},
		          {t:982,p:3},
		          {t:982,p:0},
		          {t:997,p:5},
		          {t:997,p:8},
		          {t:1012,p:3},
		          {t:1012,p:0},
		          {t:1019,p:4},
		          {t:1027,p:5},
		          {t:1027,p:8},
		          {t:1042,p:1},
		          {t:1042,p:0},
		          {t:1049,p:4},
		          {t:1057,p:5},
		          {t:1057,p:8},
		          {t:1072,p:1},
		          {t:1072,p:0},
		          {t:1079,p:7},
		          {t:1087,p:3},
		          {t:1087,p:8},
		          {t:1094,p:5},
		          {t:1102,p:4},
		          {t:1102,p:0},
		          {t:1117,p:8},
		          {t:1132,p:0},
		          {t:1147,p:8},
		          {t:1162,p:0},
		          {t:1169,p:2},
		          {t:1177,p:8},
		          {t:1184,p:6},
		          {t:1192,p:0},
		          {t:1199,p:2},
		          {t:1207,p:8},
		          {t:1214,p:6},
		          {t:1222,p:1},
		          {t:1222,p:0},
		          {t:1229,p:5},
		          {t:1229,p:2},
		          {t:1237,p:7},
		          {t:1237,p:8},
		          {t:1244,p:3},
		          {t:1244,p:6},
		          {t:1252,p:1},
		          {t:1252,p:0},
		          {t:1259,p:4},
		          {t:1259,p:2},
		          {t:1267,p:7},
		          {t:1267,p:8},
		          {t:1274,p:6},
		          {t:1282,p:3},
		          {t:1282,p:0},
		          {t:1289,p:4},
		          {t:1289,p:2},
		          {t:1297,p:5},
		          {t:1297,p:8},
		          {t:1304,p:6},
		          {t:1312,p:7},
		          {t:1312,p:0},
		          {t:1319,p:4},
		          {t:1319,p:2},
		          {t:1327,p:1},
		          {t:1327,p:8},
		          {t:1334,p:6},
		          {t:1342,p:5},
		          {t:1342,p:0},
		          {t:1349,p:4},
		          {t:1349,p:2},
		          {t:1357,p:3},
		          {t:1357,p:8},
		          {t:1364,p:6},
		          {t:1372,p:1},
		          {t:1372,p:0},
		          {t:1379,p:5},
		          {t:1379,p:2},
		          {t:1387,p:7},
		          {t:1387,p:8},
		          {t:1394,p:3},
		          {t:1394,p:6},
		          {t:1402,p:4},
		          {t:1402,p:0},
		          {t:1432,p:1},
		          {t:1432,p:2},
		          {t:1447,p:6},
		          {t:1447,p:7},
		          {t:1462,p:0},
		          {t:1462,p:1},
		          {t:1477,p:7},
		          {t:1477,p:8},
		          {t:1492,p:0},
		          {t:1492,p:3},
		          {t:1507,p:5},
		          {t:1507,p:8},
		          {t:1522,p:3},
		          {t:1522,p:6},
		          {t:1537,p:2},
		          {t:1537,p:5},
		          {t:1567,p:1},
		          {t:1567,p:2},
		          {t:1567,p:3},
		          {t:1574,p:4},
		          {t:1582,p:5},
		          {t:1582,p:7},
		          {t:1582,p:8},
		          {t:1597,p:0},
		          {t:1597,p:1},
		          {t:1597,p:3},
		          {t:1604,p:4},
		          {t:1612,p:5},
		          {t:1612,p:6},
		          {t:1612,p:7},
		          {t:1627,p:1},
		          {t:1627,p:0},
		          {t:1627,p:3},
		          {t:1634,p:4},
		          {t:1642,p:7},
		          {t:1642,p:5},
		          {t:1642,p:8},
		          {t:1657,p:1},
		          {t:1657,p:3},
		          {t:1657,p:6},
		          {t:1664,p:4},
		          {t:1672,p:7},
		          {t:1672,p:2},
		          {t:1672,p:5},
		          {t:1687,p:0},
		          {t:1687,p:1},
		          {t:1694,p:4},
		          {t:1694,p:5},
		          {t:1702,p:6},
		          {t:1702,p:7},
		          {t:1717,p:1},
		          {t:1717,p:2},
		          {t:1724,p:3},
		          {t:1724,p:4},
		          {t:1732,p:7},
		          {t:1732,p:8},
		          {t:1747,p:6},
		          {t:1751,p:2},
		          {t:1755,p:0},
		          {t:1759,p:8},
		          {t:1762,p:3},
		          {t:1766,p:5},
		          {t:1770,p:1},
		          {t:1774,p:4},
		          {t:1777,p:7}


		          ]
};

//ミッション9
mission[9]={
		"rank":0,
		"highscore":0,
		"score":0,
		"maxcombo":0,
		"title":"土竜保護法成立。施行前の\n最後のミッション。再び農家へ",
		"mogura":[{t:30,p:0},
		          {t:34,p:1},
		          {t:38,p:2},
		          {t:42,p:5},
		          {t:45,p:8},
		          {t:49,p:7},
		          {t:53,p:6},
		          {t:57,p:3},
		          {t:60,p:0},
		          {t:64,p:1},
		          {t:68,p:2},
		          {t:72,p:5},
		          {t:75,p:8},
		          {t:79,p:7},
		          {t:83,p:6},
		          {t:87,p:3},
		          {t:90,p:0},
		          {t:94,p:1},
		          {t:98,p:2},
		          {t:102,p:5},
		          {t:105,p:8},
		          {t:109,p:7},
		          {t:113,p:6},
		          {t:117,p:3},
		          {t:120,p:0},
		          {t:150,p:0},
		          {t:154,p:3},
		          {t:158,p:6},
		          {t:162,p:7},
		          {t:165,p:8},
		          {t:169,p:5},
		          {t:173,p:2},
		          {t:177,p:1},
		          {t:180,p:0},
		          {t:184,p:3},
		          {t:188,p:6},
		          {t:192,p:7},
		          {t:195,p:8},
		          {t:199,p:5},
		          {t:203,p:2},
		          {t:207,p:1},
		          {t:210,p:0},
		          {t:214,p:3},
		          {t:218,p:6},
		          {t:222,p:7},
		          {t:225,p:8},
		          {t:229,p:5},
		          {t:233,p:2},
		          {t:237,p:1},
		          {t:240,p:0},
		          {t:270,p:8},
		          {t:274,p:5},
		          {t:278,p:4},
		          {t:282,p:7},
		          {t:285,p:2},
		          {t:289,p:1},
		          {t:293,p:0},
		          {t:297,p:3},
		          {t:300,p:6},
		          {t:304,p:4},
		          {t:308,p:8},
		          {t:312,p:5},
		          {t:315,p:1},
		          {t:319,p:0},
		          {t:323,p:3},
		          {t:327,p:7},
		          {t:330,p:2},
		          {t:334,p:4},
		          {t:338,p:6},
		          {t:342,p:5},
		          {t:345,p:1},
		          {t:349,p:3},
		          {t:353,p:8},
		          {t:357,p:0},
		          {t:360,p:7},
		          {t:390,p:8},
		          {t:394,p:5},
		          {t:398,p:2},
		          {t:402,p:1},
		          {t:405,p:0},
		          {t:409,p:6},
		          {t:413,p:3},
		          {t:417,p:4},
		          {t:420,p:7},
		          {t:424,p:5},
		          {t:428,p:8},
		          {t:432,p:1},
		          {t:435,p:2},
		          {t:439,p:6},
		          {t:443,p:3},
		          {t:447,p:0},
		          {t:450,p:4},
		          {t:454,p:7},
		          {t:458,p:5},
		          {t:462,p:1},
		          {t:465,p:8},
		          {t:469,p:2},
		          {t:473,p:6},
		          {t:477,p:3},
		          {t:480,p:0},
		          {t:510,p:1},
		          {t:510,p:4},
		          {t:510,p:7},
		          {t:517,p:0},
		          {t:517,p:8},
		          {t:525,p:3},
		          {t:525,p:5},
		          {t:532,p:2},
		          {t:532,p:6},
		          {t:555,p:3},
		          {t:555,p:4},
		          {t:555,p:5},
		          {t:562,p:0},
		          {t:562,p:8},
		          {t:570,p:1},
		          {t:570,p:7},
		          {t:577,p:2},
		          {t:577,p:6},
		          {t:600,p:1},
		          {t:600,p:4},
		          {t:600,p:7},
		          {t:607,p:6},
		          {t:607,p:2},
		          {t:615,p:3},
		          {t:615,p:5},
		          {t:622,p:0},
		          {t:622,p:8},
		          {t:645,p:3},
		          {t:645,p:4},
		          {t:645,p:5},
		          {t:652,p:2},
		          {t:652,p:6},
		          {t:660,p:1},
		          {t:660,p:7},
		          {t:667,p:0},
		          {t:667,p:8},
		          {t:690,p:0},
		          {t:697,p:1},
		          {t:705,p:3},
		          {t:712,p:4},
		          {t:720,p:0},
		          {t:727,p:1},
		          {t:735,p:3},
		          {t:742,p:4},
		          {t:750,p:2},
		          {t:750,p:0},
		          {t:757,p:6},
		          {t:757,p:1},
		          {t:765,p:8},
		          {t:765,p:3},
		          {t:772,p:5},
		          {t:772,p:4},
		          {t:780,p:0},
		          {t:787,p:1},
		          {t:795,p:3},
		          {t:802,p:4},
		          {t:810,p:2},
		          {t:810,p:0},
		          {t:814,p:5},
		          {t:817,p:6},
		          {t:817,p:1},
		          {t:821,p:7},
		          {t:824,p:8},
		          {t:824,p:3},
		          {t:831,p:4},
		          {t:839,p:0},
		          {t:846,p:1},
		          {t:854,p:3},
		          {t:861,p:4},
		          {t:869,p:0},
		          {t:873,p:8},
		          {t:877,p:1},
		          {t:881,p:6},
		          {t:885,p:3},
		          {t:889,p:2},
		          {t:893,p:4},
		          {t:897,p:7},
		          {t:900,p:5},
		          {t:930,p:0},
		          {t:930,p:1},
		          {t:930,p:3},
		          {t:945,p:7},
		          {t:945,p:8},
		          {t:945,p:5},
		          {t:960,p:0},
		          {t:960,p:1},
		          {t:960,p:3},
		          {t:975,p:7},
		          {t:975,p:8},
		          {t:975,p:5},
		          {t:990,p:4},
		          {t:990,p:0},
		          {t:990,p:1},
		          {t:990,p:3},
		          {t:997,p:2},
		          {t:1005,p:6},
		          {t:1005,p:7},
		          {t:1005,p:8},
		          {t:1005,p:5},
		          {t:1020,p:0},
		          {t:1020,p:1},
		          {t:1020,p:3},
		          {t:1027,p:2},
		          {t:1035,p:6},
		          {t:1035,p:5},
		          {t:1035,p:8},
		          {t:1035,p:7},
		          {t:1042,p:4},
		          {t:1050,p:0},
		          {t:1050,p:1},
		          {t:1050,p:3},
		          {t:1065,p:8},
		          {t:1065,p:7},
		          {t:1065,p:5},
		          {t:1080,p:2},
		          {t:1080,p:0},
		          {t:1080,p:1},
		          {t:1080,p:3},
		          {t:1095,p:4},
		          {t:1095,p:8},
		          {t:1095,p:7},
		          {t:1095,p:5},
		          {t:1110,p:6},
		          {t:1110,p:0},
		          {t:1110,p:1},
		          {t:1110,p:3},
		          {t:1125,p:4},
		          {t:1125,p:8},
		          {t:1125,p:7},
		          {t:1125,p:5},
		          {t:1140,p:2},
		          {t:1140,p:0},
		          {t:1140,p:1},
		          {t:1140,p:3},
		          {t:1155,p:4},
		          {t:1155,p:8},
		          {t:1155,p:7},
		          {t:1155,p:5},
		          {t:1170,p:0},
		          {t:1170,p:2},
		          {t:1170,p:6},
		          {t:1185,p:4},
		          {t:1185,p:8},
		          {t:1200,p:0},
		          {t:1200,p:2},
		          {t:1200,p:6},
		          {t:1215,p:4},
		          {t:1215,p:8},
		          {t:1230,p:7},
		          {t:1230,p:0},
		          {t:1230,p:2},
		          {t:1230,p:6},
		          {t:1237,p:1},
		          {t:1245,p:3},
		          {t:1245,p:4},
		          {t:1245,p:8},
		          {t:1252,p:5},
		          {t:1260,p:7},
		          {t:1260,p:0},
		          {t:1260,p:2},
		          {t:1260,p:6},
		          {t:1267,p:1},
		          {t:1275,p:3},
		          {t:1275,p:4},
		          {t:1275,p:8},
		          {t:1282,p:5},
		          {t:1290,p:0},
		          {t:1290,p:2},
		          {t:1290,p:6},
		          {t:1305,p:4},
		          {t:1305,p:8},
		          {t:1320,p:0},
		          {t:1320,p:2},
		          {t:1320,p:6},
		          {t:1335,p:4},
		          {t:1335,p:8},
		          {t:1350,p:1},
		          {t:1350,p:0},
		          {t:1350,p:2},
		          {t:1350,p:6},
		          {t:1365,p:5},
		          {t:1365,p:4},
		          {t:1365,p:8},
		          {t:1380,p:7},
		          {t:1380,p:0},
		          {t:1380,p:2},
		          {t:1380,p:6},
		          {t:1395,p:3},
		          {t:1395,p:4},
		          {t:1395,p:8},
		          {t:1410,p:1},
		          {t:1410,p:0},
		          {t:1410,p:2},
		          {t:1410,p:6},
		          {t:1417,p:5},
		          {t:1425,p:7},
		          {t:1425,p:4},
		          {t:1425,p:8},
		          {t:1432,p:3},
		          {t:1440,p:0},
		          {t:1440,p:1},
		          {t:1440,p:2},
		          {t:1440,p:6},
		          {t:1447,p:5},
		          {t:1455,p:7},
		          {t:1455,p:4},
		          {t:1455,p:8},
		          {t:1462,p:3},
		          {t:1485,p:0},
		          {t:1489,p:1},
		          {t:1493,p:2},
		          {t:1497,p:5},
		          {t:1500,p:4},
		          {t:1504,p:3},
		          {t:1508,p:6},
		          {t:1512,p:7},
		          {t:1515,p:8},
		          {t:1519,p:1},
		          {t:1523,p:0},
		          {t:1527,p:2},
		          {t:1530,p:5},
		          {t:1534,p:4},
		          {t:1538,p:7},
		          {t:1542,p:6},
		          {t:1575,p:4},
		          {t:1579,p:5},
		          {t:1583,p:8},
		          {t:1587,p:7},
		          {t:1590,p:6},
		          {t:1594,p:3},
		          {t:1598,p:0},
		          {t:1602,p:1},
		          {t:1605,p:2},
		          {t:1635,p:0},
		          {t:1635,p:1},
		          {t:1639,p:4},
		          {t:1639,p:5},
		          {t:1643,p:6},
		          {t:1643,p:7},
		          {t:1647,p:2},
		          {t:1647,p:3},
		          {t:1647,p:8}

		          ]
};


var isLogin=false;

tm.social.Nineleap.getMyData(function(usermemory) {

    if (usermemory.code === 401) { // ログインしていない場合

        alert("Twitterアカウントでログインしてプレイすると\nもっと楽しめます。\niPhoneの場合はこのページの\n下の方の「Twitterアカウントでログイン」\nからログインしてください\nログイン後トップページに飛ばされるかもしれないので\n一旦このページをお気に入りに登録しておくことをおすすめします。");
        tm.social.Nineleap.getRankingData(function(userrankingmemory) {
       		info.user=userrankingmemory;
        });
    } else if (usermemory.code === 404) { // データがない場合
		isLogin=true;
		tm.social.Nineleap.getRankingData(function(userrankingmemory) {
       		info.user=userrankingmemory;
        });
    } else if (usermemory.error !== undefined) { // その他のエラー

        // エラー表示
        alert(usermemory.error);

    } else { // データが取得できた場合
			if(usermemory.data.savedata){
    			var sd=usermemory.data.savedata;
				info.highmission=sd.highmission;
				for(var i=0;i<info.highmission;i++){
					mission[i].rank=sd.mission[i].rank;
					mission[i].highscore=sd.mission[i].highscore;
				}
    		}
			if(usermemory.data.Replay){
				Replay=usermemory.data.Replay;
			}
    		isLogin=true;
    		tm.social.Nineleap.getRankingData(function(userrankingmemory) {
           		info.user=userrankingmemory;
            });


    }

});




/*
 * main
 */
tm.main(function() {
    var app = tm.display.CanvasApp("#world");
    app.resize(SCREEN_WIDTH, SCREEN_HEIGHT);
    app.fitWindow();
    var loadingScene = tm.app.LoadingScene({
        assets: ASSETS,
        nextScene: TitleScene,
        width: SCREEN_WIDTH,
        height: SCREEN_HEIGHT,
    });
    // シーンの切り替え
    app.replaceScene(loadingScene);

    app.run();
});





/*
 * TitleScene
 */
tm.define("TitleScene",{
	superClass:"tm.app.Scene",
	init:function(){
		this.superInit();
		images.sora=tm.app.Sprite("sora");
		images.hatake=tm.app.Sprite("hatake");
		images.baku=tm.app.Sprite("baku");
		images.tuti=tm.app.Sprite("tuti");
		images.ryuu=tm.app.Sprite("ryuu");
		images.tata=tm.app.Sprite("tata");
		images.ki=tm.app.Sprite("ki");
		images.goku=tm.app.Sprite("goku");
		images.sora.setPosition(SCREEN_CENTER_X,SCREEN_HEIGHT*0.2).addChildTo(this);
		images.hatake.setPosition(SCREEN_CENTER_X,SCREEN_CENTER_Y).addChildTo(this);
		this.baku=[tm.app.Sprite("baku").setPosition(70,50),
		           tm.app.Sprite("baku").setPosition(200,80),
		           tm.app.Sprite("baku").setPosition(100,140),
		           tm.app.Sprite("baku").setPosition(240,180),
		           tm.app.Sprite("baku").setPosition(160,260)];
		this.title=[images.tuti.setPosition(70,50),
		            images.ryuu.setPosition(200,80),
		            images.tata.setPosition(100,140),
		            images.ki.setPosition(240,180),
		            images.goku.setPosition(160,260),
		            ];
		this.c=0;
		this.i=0;
		this.label=menucreater("",160,280);
		this.label=labelpaint(this.label,"white",10,"#aaaa00");
	},
	update:function(app){
		if(this.c>45){
			if(app.frame%20<10){
				this.label.text="―  画面をタッチ！  ―";
			}else{
				this.label.text="";
			}
		}
		if(app.pointing.getPointingStart()){
			app.pushScene(TitleMenu());
		}
		this.c++;
		if(this.i<=4){
			if(this.c===1||this.c%10===0){
				this.baku[this.i].scaleX=0;
				this.baku[this.i].scaleY=0;
				this.baku[this.i].alpha=0;
				this.baku[this.i].tweener.to({
					scaleX:1.2*(this.i/8+1),
					scaleY:1.2*(this.i/8+1),
					alpha:1
				},120,"easeInCirc");
				this.baku[this.i].addChildTo(this);

				this.title[this.i].scaleX=2;
				this.title[this.i].scaleY=2;
				this.title[this.i].alpha=0.5;
				var aaaaa=1;
				if(this.i===4){
					this.title[this.i].rotation=359;
					aaaaa*=4;
				}
				this.title[this.i].tweener.to({
					scaleX:1,
					scaleY:1,
					alpha:1,
					rotation:0
				},80*aaaaa,"linear");
				this.title[this.i].addChildTo(this);
				this.i++;
				if(this.i===5)
					this.label.addChildTo(this);
			}
		}
	}

});


/*
 * GameScene
 */
tm.define("GameScene",{
	superClass:"tm.app.Scene",
	init:function(app){
		this.superInit();
		//ミッションがこれ以上ないとき1個減らしてプレイ
		if(info.mission===mission.length)info.mission-=1;
		images.sora.setPosition(SCREEN_CENTER_X,SCREEN_HEIGHT*0.2).addChildTo(this);
		images.hatake.setPosition(SCREEN_CENTER_X,SCREEN_CENTER_Y).addChildTo(this);
		this.lifegauge=tm.app.RectangleShape(160,20).setPosition(150,15);
		this.lifegauge.originX=0;
		this.lifegauge.scaleX=info.life/100;
		this.lifegauge.addChildTo(this)
		tm.app.Sprite("life").setPosition(150,15).setScale(0.5).addChildTo(this);
		this.scoreLabel=menucreater("0点",10,10,16);
		this.scoreLabel.setAlign("left");
		this.scoreLabel=labelpaint(this.scoreLabel,"white",5,"#333300");
		this.scoreLabel.addChildTo(this);

		this.comboLabel=menucreater("0combo",10,30,16);
		this.comboLabel=labelpaint(this.comboLabel,"white",5,"#333300");
		this.comboLabel.setAlign("left").addChildTo(this);

       // this.label=menucreater("0",30,50,30).addChildTo(this);
		//this.label.setAlign("left");
        this.c=0;
        this.i=0;
        this.isRun=true;

	},
	update:function(app){
		if(this.c===0)app.pushScene(CountDownScene());
		this.c++;
		if(this.isRun){
	    	//this.label.text=this.c/30+"秒";
			if(mission[info.mission].mogura.length>this.i){
				if(mission[info.mission].mogura[this.i].t===this.c){//条件に合えばもぐら
					Mogura(mission[info.mission].mogura[this.i].p,this.i).addChildTo(this);
					this.i++;
					if(mission[info.mission].mogura.length>this.i){
						if(mission[info.mission].mogura[this.i].t===mission[info.mission].mogura[this.i-1].t){//あれば2個目の同時押し
							Mogura(mission[info.mission].mogura[this.i].p,this.i).addChildTo(this);
							this.i++;
							if(mission[info.mission].mogura.length>this.i){
								if(mission[info.mission].mogura[this.i].t===mission[info.mission].mogura[this.i-1].t){//あれば3個目の同時押し
									Mogura(mission[info.mission].mogura[this.i].p,this.i).addChildTo(this);
									this.i++;
									if(mission[info.mission].mogura.length>this.i){
										if(mission[info.mission].mogura[this.i].t===mission[info.mission].mogura[this.i-1].t){//あれば4個目の同時押し
											Mogura(mission[info.mission].mogura[this.i].p,this.i).addChildTo(this);
											this.i++;
										}//if4
									}//3.5
								}//if3
							}//2.5
						}//if2
					}//1.5
				}//if1
			}//if0
			else{
				if(this.isRun){
					var seikou=menucreater("MISSION成功!",160,180,30).setScale(2);
					seikou.alpha=0;
					seikou.tweener.to({},1000,"linear").to({
						alpha:1,
						scaleX:1,
						scaleY:1
					},500,"easeOutCirc").to({},500,"linear").call(function(){
						app.pushScene(MissionEndScene());
					}.bind(this));
					seikou.addChildTo(this);
				}
				this.isRun=false;
			}
		}

		this.lifegauge.scaleX=info.life/100;
		this.comboLabel.text=info.combo+"combo";
		this.scoreLabel.text=info.score+"点";

		if(info.life===0&&this.isRun){
			this.isRun=false;
			var seikou=menucreater("MISSION失敗...",160,180,30).setScale(2);
			seikou.alpha=0;
			seikou.tweener.to({},1000,"linear").to({
				alpha:1,
				scaleX:1,
				scaleY:1
			},500,"easeOutCirc").to({},500,"linear").call(function(){
				info.life=0;
				app.pushScene(MissionEndScene());
			}.bind(this));
			seikou.addChildTo(this);
		}


	}//update

});



/*
 * CountDownScene
 */
tm.define("CountDownScene",{
	superClass:"tm.app.Scene",
	init:function(){
		this.superInit();
        this.c=0;
        menucreater("MISSION "+info.mission,160,70,40).addChildTo(this);
        menucreater(mission[info.mission].title,160,100).addChildTo(this);
        menucreater("今回の目標数\n"+mission[info.mission].mogura.length,160,200).addChildTo(this);
	},
	update:function(app){
		this.c++;
		if(this.c===1){
			this.label=menucreater("3",160,160,60);
			this.label.setScale(2);
			this.label.alpha=0;
			this.label.tweener.to({
				scaleX:1,
				scaleY:1,
				alpha:1
			},300,"easeInCirc");
			this.label.addChildTo(this);
		}
		if(this.c===31){
			this.label.remove();
			this.label=menucreater("2",160,160,60);
			this.label.setScale(2);
			this.label.alpha=0;
			this.label.tweener.to({
				scaleX:1,
				scaleY:1,
				alpha:1
			},300,"easeInCirc");
			this.label.addChildTo(this);
		}
		if(this.c===61){
			this.label.remove();
			this.label=menucreater("1",160,160,60);
			this.label.setScale(2);
			this.label.alpha=0;
			this.label.tweener.to({
				scaleX:1,
				scaleY:1,
				alpha:1
			},300,"easeInCirc");
			this.label.addChildTo(this);
		}
		if(this.c===91){
			this.label.remove();
			this.label=menucreater("START!",160,160,60);
			this.label.setScale(2);
			this.label.alpha=0;
			this.label.tweener.to({
				scaleX:1,
				scaleY:1,
				alpha:1
			},300,"easeInCirc");
			this.label.addChildTo(this);
		}
		if(this.c===121){
			this.label.remove();
			app.popScene(this);
		}

	}//update

});


/*
 * MissionEndScene
 */
tm.define("MissionEndScene",{
	superClass:"tm.app.Scene",
	init:function(){
		this.superInit();
        this.c=0;
        this.kuro=tm.app.RectangleShape(320,320,{fillStyle:"#000000",strokeStyle:"#000000"}).setPosition(160,160);
        this.kuro.alpha=0.8;
        this.kuro.addChildTo(this);
        var l="left";
        var mo=mission[info.mission].mogura.length;
        labelpaint(menucreater("MISSION "+info.mission,160,10),"yellow",10,"white").addChildTo(this);

		this.scoreLabel=menucreater("総合得点:"+info.score+"点",10,35);
		this.scoreLabel.setAlign("left");
		this.scoreLabel=labelpaint(this.scoreLabel,"black",5,"#ffff77");
		this.scoreLabel.addChildTo(this);

		this.comboLabel=menucreater("最大コンボ:"+info.maxcombo+"combo",10,60,20);
		this.comboLabel=labelpaint(this.comboLabel,"black",5,"#ffff77");
		this.comboLabel.setAlign("left").addChildTo(this);

        HitMessage(3,50,85,true).addChildTo(this);
        menucreater(":"+info.great,100,85,24,l).addChildTo(this);
        HitMessage(2,50,115,true).addChildTo(this);
        menucreater(":"+info.good,100,115,24,l).addChildTo(this);
        HitMessage(1,50,145,true).addChildTo(this);
        menucreater(":"+info.bad,100,145,24,l).addChildTo(this);
        HitMessage(0,50,175,true).addChildTo(this);
        menucreater(":"+info.miss,100,175,24,l).addChildTo(this);
        this.rank=0;
        if (info.life>=1){
        	this.rank=1;
	        if (info.miss===0){
	        	this.rank=2;
	        	if (info.combo===mo){
	            	this.rank=3;
	            	if (info.combo===info.great){
	            		this.rank=4;
	            	}
	            }
	        }
        }
		for(var i=0;i<3;i++){
			tm.app.Sprite("life").setPosition(i*30+10,205).setScale(0.5).addChildTo(this);
			tm.app.Sprite("life").setPosition(320-(i*30+10),205).setScale(0.5).addChildTo(this);
		}
        menucreater("ボーナス",160,205,24).addChildTo(this);
        this.perfect=menucreater("パーフェクト(S):",10,230,20,l).setScale(2);
        this.fullcombo=menucreater("フルコンボ(A):",10,255,20,l).setScale(2);
        this.nomiss=menucreater("ノーミス(B):",10,280,20,l).setScale(2);
        this.clear=menucreater("クリア(C):",10,305,20,l).setScale(2);
        this.perfect.alpha=0.1;
        this.fullcombo.alpha=0.1;
        this.nomiss.alpha=0.1;
        this.clear.alpha=0.1;

		this.clear.tweener.to({
			alpha:1,
			scaleX:1,
			scaleY:1
		},500,"easeOutCirc").call(function(){
			if(this.rank>=1){
				info.score+=mo*10;
				this.scoreLabel.text="総合得点:"+info.score+"点";
			}
		}.bind(this));
		this.nomiss.tweener.to({
			alpha:1,
			scaleX:1,
			scaleY:1
		},500,"easeOutCirc").call(function(){
			if(this.rank>=2){
				info.score+=mo*15;
				this.scoreLabel.text="総合得点:"+info.score+"点";
			}
		}.bind(this));
		this.fullcombo.tweener.to({
			alpha:1,
			scaleX:1,
			scaleY:1
		},500,"easeOutCirc").call(function(){
			if(this.rank>=3){
				info.score+=mo*25;
				this.scoreLabel.text="総合得点:"+info.score+"点";
			}
		}.bind(this));

		this.perfect.tweener.to({
			alpha:1,
			scaleX:1,
			scaleY:1
		},500,"easeOutCirc").call(function(){
			if(this.rank>=4){
				info.score+=mo*50;
				this.scoreLabel.text="総合得点:"+info.score+"点";
			}
		}.bind(this));

		this.rankmes=menucreater("D",240,130,60).setScale(2);
		this.rankmes.alpha=0;
		this.rankmes.tweener.to({
			alpha:1,
			scaleX:1,
			scaleY:1
		},1000,"easeOutCirc").call(function(){
			if(!info.isReplay){
				if(info.mission===info.highmission&&this.rank>=1){
					this.kaihou=menucreater("新しいミッションが発表されました",160,160,23);

					if(info.mission===9){
						this.kaihou.tweener.to({
							scaleX:0.7,
							scaleY:0.7
							},2500,"linear").to({
							alpha:0
						},3500,"linear");
						this.kaihou.text="オールクリアおめでとう!\n自分の過ちに気付き\n再び農業を始め\n幸せな農家ライフを送りました\nめでたし　めでたし";
					}else{
						this.kaihou.tweener.to({
							scaleX:0.7,
							scaleY:0.7
							},1500,"linear").to({
							alpha:0
						},500,"linear");
					}
					this.kaihou.addChildTo(this);
					info.highmission++;
				}
				mission[info.mission].score=info.score;
				if(mission[info.mission].rank<this.rank)mission[info.mission].rank=this.rank;
				if (mission[info.mission].highscore<=mission[info.mission].score){
					if(this.rank!==0)info.replaysave=true;
					mission[info.mission].highscore=mission[info.mission].score;
				}
				if(Replay[info.mission].rank<this.rank)Replay[info.mission].rank=this.rank;
				if (Replay[info.mission].highscore<=mission[info.mission].score) {
					if(this.rank!==0)info.replaysave=true;
					Replay[info.mission].highscore=mission[info.mission].score;
				}

				dataSave();
			}
			this.isEnd=true;

		}.bind(this));
        switch (this.rank) {
		case 0:
			this.perfect.text+="×";
			this.fullcombo.text+="×";
			this.nomiss.text+="×";
			this.clear.text+="×";
			this.rankmes=labelpaint(this.rankmes,"#aa0000",20,"red");
			this.rankmes.text="D";
			break;
		case 1:

			this.perfect.text+="×";
			this.fullcombo.text+="×";
			this.nomiss.text+="×";
			this.clear.text+="+"+mo*10;

			this.rankmes=labelpaint(this.rankmes,"green",20,"green");
			this.rankmes.text="C";
			break;
		case 2:
			this.perfect.text+="×";
			this.fullcombo.text+="×";
			this.nomiss.text+="+"+mo*15+"点";
			this.clear.text+="+"+mo*10+"点";
			this.rankmes=labelpaint(this.rankmes,"#7777ff",20,"blue");
			this.rankmes.text="B";
			break;
		case 3:

			this.perfect.text+="×";
			this.fullcombo.text+="+"+mo*25+"点";
			this.nomiss.text+="+"+mo*15+"点";
			this.clear.text+="+"+mo*10+"点";
			this.rankmes=labelpaint(this.rankmes,"#e0e0e0",20,"#c0c0c0");
			this.rankmes.text="A";

			break;
		case 4:

			this.perfect.text+="+"+mo*50+"点";
			this.fullcombo.text+="+"+mo*25+"点";
			this.nomiss.text+="+"+mo*15+"点";
			this.clear.text+="+"+mo*10+"点";
			this.rankmes=labelpaint(this.rankmes,"yellow",20,"#e7bd2c");
			this.rankmes.text="S";
			break;

		}
		this.label=menucreater("",160,280);
		this.label=labelpaint(this.label,"white",20,"#aaaa00");
        this.isEnd=false;

	},
	update:function(app){
		if(!this.isEnd)this.c++;
		if(this.c===15){
			this.clear.addChildTo(this);
		}
		if(this.c===30){
			this.nomiss.addChildTo(this);

		}
		if(this.c===45){
			this.fullcombo.addChildTo(this);
		}
		if(this.c===60){
			this.perfect.addChildTo(this);
		}
		if(this.c===75){
			menucreater("ランク",240,85).addChildTo(this);
			this.rankmes.addChildTo(this);
			this.label.addChildTo(this);
		}
		if(this.isEnd){
			if(app.frame%20<10){
				this.label.text="―  画面をタッチ！  ―";
			}else{
				this.label.text="";
			}

		}
		if(app.pointing.getPointingStart()){
			if(this.isEnd){
				scoreTouroku();
			}else{
				if(this.c<15){
					this.clear.addChildTo(this);
				}
				if(this.c<30){
					this.nomiss.addChildTo(this);
				}
				if(this.c<45){
					this.fullcombo.addChildTo(this);
				}
				if (this.c<60) {
					this.perfect.addChildTo(this);
				}
				if(this.c<75){
					menucreater("ランク",240,85).addChildTo(this);
					this.rankmes.addChildTo(this);
					this.label.addChildTo(this);
				}
			}
		}


	}//update

});



/**
 * TitleMenu
 */
 tm.define("TitleMenu", {
    superClass : "tm.app.Scene",

    init : function() {
        this.superInit();
        this.bg=tm.app.RectangleShape(10,10,{fillStyle:"#333300",strokeStyle:"transparent"}).setPosition(160,160);
		this.bg.tweener.to({
			width:SCREEN_WIDTH*0.7,
			height:SCREEN_HEIGHT*0.7,
		},200,"easeOutQuad");
		this.bg.addChildTo(this);
		var menu=["最新のミッション","過去のミッション","土竜叩き・極の間"];
		this.menu=[];
		this.waku=[];
		for(var i=0;i<menu.length;i++){
			this.waku[i]=wakucreator(SCREEN_WIDTH*0.65,SCREEN_HEIGHT*0.09,"#505000","#ffff77",160,SCREEN_HEIGHT*(0.6+i*0.1)).addChildTo(this);
			menu[i]=menucreater(menu[i],160,SCREEN_HEIGHT*(0.6+i*0.1)).addChildTo(this);
			this.menu[i]=menu[i];
		}
        this.setumei=menucreater("",160,SCREEN_HEIGHT*0.3,14).addChildTo(this);
		this.iti=1;
 	},
        update:function(app){
        	this.itinow=this.iti;
       	 for(var i=0;i<this.menu.length;i++){
	        	if(this.iti===i+1){
	        		this.menu[i]=(app.frame%20<10) ?labelpaint(this.menu[i],"black",0,"#ffff00"):labelpaint(this.menu[i],"black",0,"#777700");
				}else{
					this.menu[i]=labelpaint(this.menu[i],"black",0,"#ffff00");
				}
	        }
       	 for (var i=0;i<this.menu.length;i++) if (app.pointing.getPointingStart()) if(this.waku[i].isHitPoint(app.pointing.x,app.pointing.y)) this.iti=i+1;
       	 switch (this.iti) {
       	case 1:
			this.setumei.text="最新のミッションを\nプレイします。";
			break;
       	case 2:
			this.setumei.text="過去のミッションが\nプレイできます。";
			break;
       	case 3:
			this.setumei.text="ランキング上位の\nプレイヤーの叩き姿が\n拝めます（リプレイ）";
			break;

		}

       	 if(app.pointing.getPointingStart()){
    			this.susumu=false;
        			if(this.waku[this.itinow-1].isHitPoint(app.pointing.x,app.pointing.y))this.susumu=true;
        		if(this.susumu){
	         		switch(this.iti){
	         		case 1:
	         			info.mission=info.highmission;
	         			app.replaceScene(GameScene());
	         			break;
	         		case 2:
	         			app.pushScene(MissionSelectScene());
	         			break;
	         		case 3:
	         			app.pushScene(UserSelectScene());
	         			break;
	         		}
        		}
        	}
    }
});



 /**
  * MissionSelectScene
  */
  tm.define("MissionSelectScene", {
     superClass : "tm.app.Scene",

     init : function(rep,iti) {
         this.superInit();
         if(rep==undefined)this.rep=false;
         else {
        	 this.rep=rep;
         }
         if(iti==undefined)this.jibun=true;
         else{
        	 this.jibun=false;
        	 this.uiti=iti;
         }
         this.bg=tm.app.RectangleShape(10,10,{fillStyle:"#333300",strokeStyle:"transparent"}).setPosition(160,160);
 		this.bg.tweener.to({
 			width:SCREEN_WIDTH*0.97,
 			height:SCREEN_HEIGHT*0.97,
 		},200,"easeOutQuad");
 		this.bg.addChildTo(this);
 		var menu=[];
 		if(!this.rep){
	 		for(var i =0;i<info.highmission;i++){
	 			menu[i]="MISSION "+i;
	 		}
 		}else{
 			if(this.jibun)info.rhighmission=Replay[0].highmission;
 			else{
 				if(info.user[this.uiti].data.Replay)info.rhighmission=info.user[this.uiti].data.Replay[0].highmission;
 				else info.rhighmission=0;
 			}
 			for(var i =0;i<info.rhighmission;i++){
	 			menu[i]="MISSION "+i;
	 		}
 		}
 		if(menu.length===0)menu[0]="ミッションがありません";
 		this.menu=[];
 		this.waku=[];
 		this.nagasa=menu.length;
 		if(this.nagasa>=5)this.nagasa=5;
 		for(var i=0;i<this.nagasa;i++){
 			this.waku[i]=wakucreator(SCREEN_WIDTH*0.8,SCREEN_HEIGHT*0.09,"#505000","#ffff77",160,SCREEN_HEIGHT*(0.3+i*0.1)).addChildTo(this);
 			menu[i]=menucreater(menu[i],160,SCREEN_HEIGHT*(0.3+i*0.1)).addChildTo(this);
 			this.menu[i]=menu[i];
 		}
 		this.modoruwaku=wakucreator(SCREEN_WIDTH*0.6,SCREEN_HEIGHT*0.09,"#505000","#ffff77",160,295).addChildTo(this);
 		this.modoru=labelpaint(menucreater("戻る",160,295)).addChildTo(this);
 		if(!this.rep){
	 		if(info.highmission>=6){
	 			this.pagewaku=wakucreator(SCREEN_WIDTH*0.6,SCREEN_HEIGHT*0.09,"#505000","#ffff77",160,265).addChildTo(this);
	 			this.tugipage=labelpaint(menucreater("次のページ",160,265)).addChildTo(this);
	 		}
 		}else{
 			if(info.rhighmission>=6){
	 			this.pagewaku=wakucreator(SCREEN_WIDTH*0.6,SCREEN_HEIGHT*0.09,"#505000","#ffff77",160,265).addChildTo(this);
	 			this.tugipage=labelpaint(menucreater("次のページ",160,265)).addChildTo(this);
	 		}
 		}
         this.setumei=menucreater("",160,SCREEN_HEIGHT*0.08,14).addChildTo(this);
 		this.iti=1;
 		this.page=0;
 		this.pl=this.rep?info.rhighmission:info.highmission;
		if(this.page===0){
			if(this.nagasa===5)this.pl=5;
			else this.pl=this.menu.length;
		}else{
			this.pl-=5;
		}

  	},
         update:function(app){
         	this.itinow=this.iti;
         	this.pagenow=this.page;

        	 for(var i=0;i<this.pl;i++){
 	        	if(this.iti===i+1){
 	        		if(this.menu[i].text==="ミッションがありません"){
 	        			this.setumei.text="戻ります"
 	        		}else{
	 	        		if(!this.rep){
	 	        			this.mr=mission[i+this.page*5].rank;
	 	        			this.setumei.text=mission[i+this.page*5].title+"\n" +
		 	        				"ハイスコア:"+mission[i+this.page*5].highscore+"点\n" +
		 	        						"ランク:";
	 	        		}else{
	 	        			if(this.jibun){
		 	        			this.setumei.text=mission[i+this.page*5].title+"\n" +
			 	        				"ハイスコア:"+Replay[i+this.page*5].highscore+"点\n" +
			 	        						"ランク:";
		 	        			this.mr=Replay[i+this.page*5].rank;
	 	        			}else{
		 	        			this.setumei.text=mission[i+this.page*5].title+"\n" +
	 	        				"ハイスコア:"+info.user[this.uiti].data.Replay[i+this.page*5].highscore+"点\n" +
	 	        						"ランク:";
		 	        			this.mr=info.user[this.uiti].data.Replay[i+this.page*5].rank;
	 	        			}
	 	        		}
	 	        		switch (this.mr) {
						case 0:
							this.setumei.text+="D";
							break;
						case 1:
							this.setumei.text+="C";
							break;
						case 2:
							this.setumei.text+="B";
							break;
						case 3:
							this.setumei.text+="A";
							break;
						case 4:
							this.setumei.text+="S";
							break;
						}
 	        		}
 	        		this.menu[i]=(app.frame%20<10) ?labelpaint(this.menu[i],"black",0,"#ffff00"):labelpaint(this.menu[i],"black",0,"#777700");
 				}else{
					this.menu[i]=labelpaint(this.menu[i],"black",0,"#ffff00");
 				}
 	        }
        	 for (var i=0;i<this.pl;i++) if (app.pointing.getPointingStart()) if(this.waku[i].isHitPoint(app.pointing.x,app.pointing.y)) this.iti=i+1;



        	 if(app.pointing.getPointingStart()){
     			this.susumu=false;
     			if(this.modoruwaku.isHitPoint(app.pointing.x,app.pointing.y))app.popScene(this);
     			this.hm=this.rep?info.rhighmission:info.highmission;
     			if(this.hm>=6) {
     				if(this.pagewaku.isHitPoint(app.pointing.x,app.pointing.y)){

	     				this.pl=this.rep?info.rhighmission:info.highmission;
	     				if(this.page===0){
	     					if(this.nagasa===5)this.pl=5;
	     					else this.pl=this.menu.length;
	     				}else{
	     					this.pl-=5;
	     				}
	     				this.page+=this.page===0?1:-1;
	     				for(var i=0;i<this.pl;i++){
	     					this.waku[i].remove();
	     					this.menu[i].remove();
	     				}
	     				this.pl=this.rep?info.rhighmission:info.highmission;
	     				if(this.page===0){
	     					if(this.nagasa===5)this.pl=5;
	     					else this.pl=this.menu.length;
	     				}else{
	     					this.pl-=5;
	     				}

	     				for(var i=0;i<this.pl;i++){
	     		 			this.waku[i]=wakucreator(SCREEN_WIDTH*0.8,SCREEN_HEIGHT*0.09,"#505000","#ffff77",160,SCREEN_HEIGHT*(0.3+i*0.1)).addChildTo(this);
	     		 			this.menu[i]=menucreater("MISSION "+(i+this.page*5),160,SCREEN_HEIGHT*(0.3+i*0.1)).addChildTo(this);
	     		 		}
	     				this.tugipage.text=this.page===0?"次のページ":"前のページ";
     				}
     			}
     			if(this.waku[this.itinow-1].isHitPoint(app.pointing.x,app.pointing.y))this.susumu=true;
         		if(this.susumu){
         			if(this.iti===1){
 	         			if(this.menu[0].text==="ミッションがありません")
 	         				app.popScene(this);
 	         			else{
 	         				app.popScene(this);
 	         				app.popScene(TitleMenu());
 	         				info.mission=this.iti-1+this.page*5;
 	         				if(this.rep){
 	         					info.isReplay=true;
	 	         				if(!this.jibun){
	 	         					info.isUser=true;
	 	         					info.usernumber=this.uiti;
	 	         				}
	 	         				app.popScene(UserSelectScene());
 	         				}
 	         				app.replaceScene(GameScene());
 	         			}
         			}else{
         				app.popScene(this);
         				app.popScene(TitleMenu());
         				info.mission=this.iti-1+this.page*5;
         				if(this.rep){
	         					info.isReplay=true;
 	         				if(!this.jibun){
 	         					info.isUser=true;
 	         					info.usernumber=this.uiti;
 	         				}
 	         				app.popScene(UserSelectScene());
	         			}
         				app.replaceScene(GameScene());
         			}
         		}
         	}
     }
 });



  /**
   * UserSelectScene
   */
   tm.define("UserSelectScene", {
      superClass : "tm.app.Scene",

      init : function() {
          this.superInit();
          this.bg=tm.app.RectangleShape(10,10,{fillStyle:"#333300",strokeStyle:"transparent"}).setPosition(160,160);
  		this.bg.tweener.to({
  			width:SCREEN_WIDTH*0.97,
  			height:SCREEN_HEIGHT*0.97,
  		},200,"easeOutQuad");
  		this.bg.addChildTo(this);
  		var menu=[];
 		for(var i =0;i<info.user.length;i++){
 			menu[i]=info.user[i].screen_name;
 		}
  		if(menu.length===0)menu[0]="職人がいません";
  		//console.log(info.user);
  		this.menu=[];
  		this.waku=[];
  		menu[menu.length]="自分のリプレイ";
  		this.nagasa=menu.length;
  		if(this.nagasa>=6)this.nagasa=6;
  		for(var i=0;i<this.nagasa;i++){
  			this.waku[i]=wakucreator(SCREEN_WIDTH*0.8,SCREEN_HEIGHT*0.09,"#505000","#ffff77",160,SCREEN_HEIGHT*(0.3+i*0.1)).addChildTo(this);
  			menu[i]=menucreater(menu[i],160,SCREEN_HEIGHT*(0.3+i*0.1)).addChildTo(this);
  			this.menu[i]=menu[i];
  		}
  		this.modoruwaku=wakucreator(SCREEN_WIDTH*0.6,SCREEN_HEIGHT*0.09,"#505000","#ffff77",160,295).addChildTo(this);
  		this.modoru=labelpaint(menucreater("戻る",160,295)).addChildTo(this);

          this.setumei=menucreater("",160,SCREEN_HEIGHT*0.1,14).addChildTo(this);
  		this.iti=1;
  		this.page=0;
  		this.pl=this.rep?info.rhighmission:info.highmission;
 		if(this.page===0){
 			if(this.nagasa===5)this.pl=5;
 			else this.pl=this.menu.length;
 		}else{
 			this.pl-=5;
 		}

   	},
          update:function(app){
          	this.itinow=this.iti;
          	this.pagenow=this.page;

         	 for(var i=0;i<this.pl;i++){
  	        	if(this.iti===i+1){
  	        		if(this.menu[i].text==="職人がいません"){
  	        			this.setumei.text="戻ります"
  	        		}else{
  	        			if(i===this.menu.length-1){
  	        				this.setumei.text="自分のリプレイが\n再生できます";
  	        			}else
  	        				this.setumei.text=info.user[i].result;
  	        		}
  	        		this.menu[i]=(app.frame%20<10) ?labelpaint(this.menu[i],"black",0,"#ffff00"):labelpaint(this.menu[i],"black",0,"#777700");
  				}else{
  					this.menu[i]=labelpaint(this.menu[i],"black",0,"#ffff00");
  				}
  	        }
         	 for (var i=0;i<this.pl;i++) if (app.pointing.getPointingStart()) if(this.waku[i].isHitPoint(app.pointing.x,app.pointing.y)) this.iti=i+1;



         	 if(app.pointing.getPointingStart()){
      			this.susumu=false;
      			if(this.modoruwaku.isHitPoint(app.pointing.x,app.pointing.y))app.popScene(this);
      			if(this.waku[this.itinow-1].isHitPoint(app.pointing.x,app.pointing.y))this.susumu=true;
          		if(this.susumu){
          			if(this.iti===1){
  	         			if(this.menu[0].text==="職人がいません")
  	         				app.popScene(this);
  	         			else{
  	          				app.pushScene(MissionSelectScene(true,this.iti-1));
  	         			}
          			}else if(this.iti===this.menu.length){
          				app.pushScene(MissionSelectScene(true));
          			}else{
          				app.pushScene(MissionSelectScene(true,this.iti-1));
          			}
          		}
          	}
      }
  });



/*
 * Moguraクラス
*/
tm.define("Mogura", {
	    superClass: "tm.app.Shape",

    init: function(posi,num) {
        this.superInit(109, 89);
        this.num=num;
        if(info.isUser)this.tim=info.user[info.usernumber].data.Replay[info.mission].d[num];
        else this.tim=Replay[info.mission].d[num];
        switch(posi){
        case 0:
        	this.x=50;
        	this.y=90;
        	this.key="numpad7";
        	break;
        case 1:
        	this.x=160;
        	this.y=90;
        	this.key="numpad8";
        	break;
        case 2:
        	this.x=270;
        	this.y=90;
        	this.key="numpad9";
        	break;
        case 3:
        	this.x=50;
        	this.y=180;
        	this.key="numpad4";
        	break;
        case 4:
        	this.x=160;
        	this.y=180;
        	this.key="numpad5";
        	break;
        case 5:
        	this.x=270;
        	this.y=180;
        	this.key="numpad6";
        	break;
        case 6:
        	this.x=50;
        	this.y=270;
        	this.key="numpad1";
        	break;
        case 7:
        	this.x=160;
        	this.y=270;
        	this.key="numpad2";
        	break;
        case 8:
        	this.x=270;
        	this.y=270;
        	this.key="numpad3";
        	break;
        }

        this.waku=tm.app.CircleShape(30,30,{fillStyle:"transparent",strokeStyle:"red"});
        this.waku.originY=0;
        this.waku.scaleY=1.1;
        this.waku.scaleX=2.2;
        this.waku.addChildTo(this);

        this.setInteractive(true);
        this.setBoundingType("rect");

        this.ana=tm.app.Sprite("ana").setScale(0);
        this.ana.originY=0.75;
        this.ana.y=18;
		this.ana.tweener.to({
			scaleY:1.2,
			scaleX:1.2
		},500,"linear");
		this.ana.addChildTo(this);
        this.mogura=tm.app.Sprite("mogura");
        this.mogura.y=33;
        this.mogura.originY=1;
        this.mogura.scaleY=0;
        var gyaku=1;
        if(posi===0||posi===1||posi===3||posi===6)gyaku=-1;
        this.mogura.scaleX=1.2*gyaku;
        this.mogura.tweener.to({
			scaleY:1.2
		},250,"easeOutCirc");
        this.c=0;
        this.dead=false;

    },
    Hit:function(app){
    	var baku=tm.app.Sprite("baku").setPosition(this.x,this.y);
		baku.setScale(0);
		baku.tweener.to({
			scaleY:1,
			scaleX:1,
			alpha:0.3
		},250,"easeOutCirc").call(function(){
			baku.remove();
		}.bind(this));
		baku.addChildTo(this.parent);
		if(!info.isReplay){
			Replay[info.mission].d[this.num]=this.c;
		}
		if(this.c<=3){//MISS
			info.combo=0;
			info.life-=6;
			if(info.life<=0)info.life=0;
			info.miss++;
			HitMessage(0,this.x,this.y).addChildTo(this.parent);
		}else if(this.c<=6){//BAD
			addScore(50);
			HitMessage(1,this.x,this.y).addChildTo(this.parent);
		}else if(this.c<=12){//GOOD
			addScore(80);
			HitMessage(2,this.x,this.y).addChildTo(this.parent);
		}else if(this.c<=21){//GREAT
			addScore(100);
			HitMessage(3,this.x,this.y).addChildTo(this.parent);
		}else if(this.c<=27){//GOOD
			addScore(80);
			HitMessage(2,this.x,this.y).addChildTo(this.parent);
		}else if(this.c<=30){//BAD
			addScore(50);
			HitMessage(1,this.x,this.y).addChildTo(this.parent);
		}
		if(!this.dead){
			this.dead=true;
			this.remove();
		}
    },
    update:function(app){

    	this.c++;
    	if(this.c===31){//MISS
    		if(!this.dead){
    			this.dead=true;
				HitMessage(0,this.x,this.y).addChildTo(this.parent);
    			this.remove();
				info.combo=0;
				info.life-=6;
				info.miss++;
				if(info.life<=0)info.life=0;
				if(!info.isReplay){
					Replay[info.mission].d[this.num]=this.c;
				}

    		}
    	}else{

	    	var p=app.pointing;
	    	if(this.c===13)this.mogura.addChildTo(this);
	        if(!info.isReplay){
		    	if (p.touches.length) {
		        	for(var i=0;i<p.touches.length;i++){
		        		if(this.isHitPoint(p.touches[i].x,p.touches[i].y))this.Hit();
		        	}

		    	}else if(app.keyboard.getKeyDown(this.key)){
		        	this.Hit();
		        }
	        }else{
	        	if(this.tim===this.c)this.Hit();
	        }
    	}
    }
});

/*
 * HitMessage
*/
tm.define("HitMessage", {
	    superClass: "tm.app.Shape",

    init: function(timing,x,y,end) {
        this.superInit(100, 40);
        this.setPosition(x,y);
        switch (timing) {
		case 0:
			this.mes=menucreater("MISS......",0,0);
			this.mes=labelpaint(this.mes,"black",0,"red").addChildTo(this);
			break;

		case 1:
			this.mes=menucreater("BAD...",0,0);
			this.mes=labelpaint(this.mes,"black",0,"purple").addChildTo(this);

			break;

		case 2:
			this.mes=menucreater("GOOD!",0,0);
			this.mes=labelpaint(this.mes,"black",0,"blue").addChildTo(this);
			break;

		case 3:
			this.mes=["G",
			          "R",
			          "E",
			          "A",
			          "T",
			          "!",
			          "!"
			          ];
			var mescolor=[
			            "#3300ff",
			            "blue",
			            "#00ffff",
			            "green",
			            "yellow",
			            "orange",
			            "red"
			            ];
			for(var i=0;i<7;i++){
				this.mes[i]=menucreater(this.mes[i],(-14*3)+i*14,0);
				this.mes[i]=labelpaint(this.mes[i],"black",0,mescolor[i]).addChildTo(this);
			}
			break;
		}
        if(!end){
	        this.setScale(1.5);
	        this.alpha=0.2;
	        this.tweener.to({
	        	scaleX:1,
	        	scaleY:1,
	        	alpha:1,
	        },200,"linear").to({
	        	y:this.y-20
	        },300,"easeOutCirc").call(function(){
	        	this.remove();
	        }.bind(this));
        }
    },

});

//menucreatorの誤字
//menuを配置していく
//使い方var Label=menucreater("文字列",SW/2,SH/2,28).addChildTo(scene);とか
var menucreater=function(label,setx,sety,size,align){
	if(align==undefined)align="center";
	label=tm.app.Label(label).setAlign(align)
	.setBaseline("middle")
	.setPosition(setx,sety);
	if(size==undefined)size=0;
	if(size>0)label.setFontSize(size);
	label.setInteractive(true);
    label.setBoundingType("rect");
	return label;
};
var wakucreator=function(w,h,c,s,x,y){
	var waku=tm.app.RoundRectangleShape(w,h,{fillStyle:c,strokeStyle:s})
	.setPosition(x,y)
	.setInteractive(true)
    .setBoundingType("rect");

	return waku;

};

//labelに影と色をつける
//使い方var l=labelpaint(ラベル,"影の色",10,"文字の色");
var labelpaint=function(label,color,bl,style){
	label.shadowColor=color;
	label.shadowBlur=bl;
	label.fillStyle=style;
	return label;
};

var addScore=function(v){
	info.score+=parseInt(v*(1+info.combo*0.01));
	if(v===50){
		info.combo=parseInt(info.combo/2);
		info.life-=3;
		info.bad++;
	}else{
		info.combo++;
		if(info.maxcombo<info.combo)info.maxcombo=info.combo;
		if(v===80){
			info.good++;
		}else{
			info.life++;
			info.great++;
		}
	}
	if(info.life>=100)info.life=100;
	if(info.life<=0)info.life=0;
};


var dataSave= function() {
	if(isLogin&&info.replaysave){
		savedata={};
		savedata.mission=[];
		savedata.highmission=info.highmission;
		Replay[0].highmission=info.highmission;
		for(var i=0;i<info.highmission;i++){
			savedata.mission[i]={};
			savedata.mission[i].rank=mission[i].rank;
			savedata.mission[i].highscore=mission[i].highscore;
		}
		tm.social.Nineleap.postMyData({
			savedata:savedata,
			Replay:Replay
	    }, function() {
	    });
	}
};

var scoreTouroku=function(app){
	var resultmsg;
	var rescore=0;
	for(var i=0;i<info.highmission;i++){
		rescore+=mission[i].highscore;
	}
	if(info.highmission===10)resultmsg=rescore+"点 "+"オールクリア!";
	else
		resultmsg=rescore+"点 "+"ミッション"+(info.highmission-1)+"までクリア!もう一度プレイして次のミッションに挑戦しよう！";
	//console.log(resultmsg);
	tm.social.Nineleap.postRanking(rescore, resultmsg);

};